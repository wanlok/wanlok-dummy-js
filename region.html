<html>
  <head>
    <!-- <script src="q2.js"></script> -->
    <style>
      body {
        margin: 0px;
        padding: 0px;
        text-align: center;
      }

      img,
      canvas {
        position: absolute;
        top: 0;
        left: 0;
      }

      #mapDiv {
        position: relative;
        display: inline-block;
      }
    </style>
    <script>
      var o = 88;
      var points = [
        [572, 727 - o],
        [585, 722 - o],
        [598, 711 - o],
        [622, 703 - o],
        [644, 709 - o],
        [650, 705 - o],
        [657, 707 - o],
        [657, 718 - o],
        [672, 731 - o],
        [666, 770 - o],
        [655, 775 - o],
        [650, 766 - o],
        [644, 768 - o],
        [642, 775 - o],
        [629, 781 - o],
        [609, 742 - o],
        [594, 735 - o],
        [580, 744 - o],
      ];

      function resize() {
        const mapDiv = document.getElementById("mapDiv");
        const imgs = mapDiv.getElementsByTagName("img");
        const canvas = mapDiv.getElementsByTagName("canvas")[0];
        var w1 = 0;
        var h1 = window.innerHeight;
        var w0 = 0;
        var h0 = 0;
        for (var i = 0; i < imgs.length; i++) {
          const slices = imgs[i].src.split("/");
          const fileName = slices[slices.length - 1];
          if (fileName.toLowerCase() === "map.svg") {
            w1 = (imgs[i].width * h1) / imgs[i].height;
            w0 = imgs[i].naturalWidth;
            h0 = imgs[i].naturalHeight;
            break;
          }
        }
        mapDiv.setAttribute("style", `width: ${w1}px; height: ${h1}px;`);
        for (var i = 0; i < imgs.length; i++) {
          imgs[i].setAttribute("style", `width: ${w1}px; height: ${h1}px;`);
        }
        canvas.setAttribute("style", `width: ${w1}px; height: ${h1}px;`);
        return [w1, h1, w0, h0];
      }

      function drawRegions(scaleX, scaleY) {
        var mapDiv = document.getElementById("mapDiv");
        var canvas = mapDiv.getElementsByTagName("canvas")[0];
        const context = canvas.getContext("2d");
        const devicePixelRatio = window.devicePixelRatio || 1;
        canvas.width = canvas.clientWidth * devicePixelRatio;
        canvas.height = canvas.clientHeight * devicePixelRatio;
        context.fillStyle = "red";
        context.scale(devicePixelRatio, devicePixelRatio);
        context.beginPath();
        for (var i = 0; i < points.length; i++) {
          var [x, y] = points[i];
          if (i == 0) {
            context.moveTo(x * scaleX, y * scaleY);
          } else {
            context.lineTo(x * scaleX, y * scaleY);
          }
        }
        context.closePath();
        context.fill();
      }

      function dummy() {
        var [w1, h1, w0, h0] = resize();
        drawRegions(w1 / w0, h1 / h0);
      }
    </script>
  </head>
  <body onload="dummy();" , onresize="dummy();">
    <div id="mapDiv">
      <img src="Map.svg" />
      <img src="Central & Western.svg" />
      <canvas />
    </div>
  </body>
</html>
